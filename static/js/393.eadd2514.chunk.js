"use strict";(self.webpackChunkmy_ts_app=self.webpackChunkmy_ts_app||[]).push([[393,234,565],{1565:(e,a,t)=>{t.r(a),t.d(a,{MainWrapper:()=>f,default:()=>g});var l=t(2791),r=t(3614),d=t(9633),o=t(6934),n=t(6029),s=t(4045),i=t(4420),c=t(2643),u=t(3763),h=t(184);d.O3h.registerModules([d.wUi,d.yir,d.imY,d.ICW]);const f=(0,o.ZP)(n.Z)((()=>({width:"100%",marginLeft:"170px",height:"93%",marginTop:"60px",padding:"16px",background:"#d0d0d0"}))),g=()=>{var e,a;const t=(0,i.I0)(),[o]=(0,l.useState)(0),{calendarData:n}=(0,i.v9)((e=>e.fileData)),[g,m]=(0,l.useState)((null===(e=n[o])||void 0===e||null===(a=e.children)||void 0===a?void 0:a.map((e=>[...e.children])).flat())||[]);(0,l.useEffect)((()=>{var e,a;m((null===(e=n[o])||void 0===e||null===(a=e.children)||void 0===a?void 0:a.map((e=>[...e.children])).flat())||[])}),[n]);const v=[{headerName:"Store",field:"storeLabel",pinned:"left",width:250},{headerName:"SKU",field:"skuLabel",pinned:"left",width:250},...(null!==n&&void 0!==n?n:[]).map((e=>{var a;return{headerName:e.headerName,children:(null!==(a=e.children)&&void 0!==a?a:[]).map((e=>({headerName:e.headerName,children:[{headerName:"Sales Units",field:"SalesUnits",cellStyle:u.hD,width:130},{headerName:"Sales Dollars",field:"SalesDollar",valueFormatter:e=>"$".concat(e.value),cellStyle:u.hD,width:130},{headerName:"GM Dollars",field:"gmDollar",valueFormatter:e=>"$".concat(e.value),cellStyle:u.hD,width:130},{headerName:"GM Percent",field:"gmPercent",valueFormatter:e=>"".concat(e.value,"%"),cellStyle:u.hD,cellClassRules:u.e_,width:130}]})))}}))];return(0,h.jsx)(f,{children:(0,h.jsx)(r.s,{rowData:g,columnDefs:v,modules:[d.ICW],debug:!0,defaultColDef:u.KR,onGridReady:async()=>{try{const e=await fetch(u.Ye),a=await e.blob();if(!a)return;const l=new FileReader;l.readAsArrayBuffer(a),l.onload=e=>{var a;const l=null===(a=e.target)||void 0===a?void 0:a.result,r=s.ij(new Uint8Array(l),{type:"array"}),d=r.Sheets.Calendar,o=s.P6.sheet_to_json(d),n=r.Sheets.Planning,i=s.P6.sheet_to_json(n),u=r.Sheets.SKUs,h=s.P6.sheet_to_json(u),f={};h.forEach((e=>{let{ID:a,Label:t,Price:l,Cost:r}=e;f[a]={price:parseFloat(l),Label:t,cost:parseFloat(r)}}));const g=r.Sheets.Stores,m=s.P6.sheet_to_json(g),v={};m.forEach((e=>{let{ID:a,Label:t}=e;v[a]=t}));const p=[],b=[],S={};o.forEach((e=>{const{"Month Label":a,"Week Label":t,Week:l}=e;p.includes(a)||p.push(a),b.includes(l)||b.push(l),S[a]||(S[a]={headerName:a,children:[]});let r=S[a].children.find((e=>e.week===l));r||(r={headerName:t,week:l,children:[]},S[a].children.push(r))})),i.forEach((e=>{let{Store:a,SKU:t,Week:l,"Sales Units":r}=e;const d=f[t].price||0,o=f[t].cost||0,n=f[t].Label,s=v[a],i=d*r,c=i-r*o,u=Math.trunc(c/i*100)||0;Object.values(S).forEach((e=>{const d=e.children.find((e=>e.week===l));d&&d.children.push({Store:a,SKU:t,SalesUnits:r,SalesDollar:i.toFixed(2),skuLabel:n,storeLabel:s,gmDollar:c.toFixed(2),gmPercent:u})}))}));const D=p.map((e=>S[e])).filter(Boolean).map((e=>({...e,children:e.children.sort(((e,a)=>b.indexOf(e.week)-b.indexOf(a.week)))})));t((0,c.k2)(D))}}catch(e){console.error("Error fetching data:",e)}}})})}},1393:(e,a,t)=>{t.r(a),t.d(a,{default:()=>x});var l=t(2791),r=t(3614),d=t(9633),o=t(1565),n=t(4045),s=t(6029),i=t(4294),c=t(4420),u=t(2643),h=(t(6704),t(1234)),f=t(3763),g=t(5289),m=t(7123),v=t(9157),p=t(5661),b=t(7665),S=t(184);function D(){const e=(0,c.I0)(),{addSkuDialog:a,skuData:t}=(0,c.v9)((e=>e.fileData)),[r,d]=(0,l.useState)(""),[o,n]=(0,l.useState)(""),[s,h]=(0,l.useState)(""),[f,D]=(0,l.useState)(""),[x,w]=(0,l.useState)(""),N=()=>{e((0,u.v9)(!1)),d(""),n(""),h(""),D(""),w("")};return(0,S.jsxs)(g.Z,{open:a,onClose:N,children:[(0,S.jsx)(p.Z,{children:"Add New SKU"}),(0,S.jsxs)(v.Z,{children:[(0,S.jsx)(b.Z,{label:"SKU",fullWidth:!0,margin:"dense",value:r,onChange:e=>d(e.target.value)}),(0,S.jsx)(b.Z,{label:"Price ($)",fullWidth:!0,margin:"dense",value:o,onChange:e=>n(e.target.value),error:isNaN(Number(o)),helperText:isNaN(Number(o))?"Enter a valid price":""}),(0,S.jsx)(b.Z,{label:"Cost ($)",fullWidth:!0,margin:"dense",value:s,onChange:e=>h(e.target.value),error:isNaN(Number(s)),helperText:isNaN(Number(s))?"Enter a valid cost":""}),(0,S.jsx)(b.Z,{label:"ID",fullWidth:!0,margin:"dense",value:f,onChange:e=>D(e.target.value),error:!!x,helperText:x})]}),(0,S.jsxs)(m.Z,{children:[(0,S.jsx)(i.Z,{onClick:N,sx:{background:"red",color:"#ffff","&:hover":{background:"red",opacity:.7}},children:"Cancel"}),(0,S.jsx)(i.Z,{onClick:()=>{r&&o&&s&&f?(e=>t.some((a=>a.ID===e)))(f)?w("ID already exists. Please use a unique ID."):isNaN(Number(o))||isNaN(Number(s))?w("Price and Cost must be valid numbers."):(e((0,u.JY)([...t,{ID:f,name:r,price:parseFloat(o),cost:parseFloat(s)}])),N()):w("All fields are required.")},sx:{background:"gray",color:"#ffff","&:hover":{background:"gray",opacity:.7}},disabled:!r||!o||!s||!f,children:"Add"})]})]})}d.O3h.registerModules([d.I6w,d.oUh,d.CBb,d.ICW,d.n4K,d.wUi,d.yir,d.ZAx]);const x=()=>{const e=(0,c.I0)(),[a,t]=(0,l.useState)(null),{skuData:d}=(0,c.v9)((e=>e.fileData)),g=(0,l.useMemo)((()=>({width:"100%",height:"100%"})),[]),m=(0,l.useMemo)((()=>({height:"100%",width:"100%"})),[]),[v]=(0,l.useState)([{headerName:"",field:"delete",width:50,cellRenderer:h.DeleteButtonRenderer},{headerName:"SKU",field:"name",width:300,editable:!0},{headerName:"Price",field:"price",width:150,editable:!0},{headerName:"Cost",field:"cost",width:150,editable:!0}]),p={width:170,valueSetter:a=>{const t=a.data.ID,l=a.column.colId;if(null!==a&&void 0!==a&&a.newValue){const r=null===d||void 0===d?void 0:d.map((e=>e.ID===t?{...e,[l]:a.newValue}:e));e((0,u.JY)(r))}}},b=(0,l.useCallback)((async a=>{t(a.api);const l=await fetch(f.Ye),r=await l.blob();if(!r)return;const d=new FileReader;d.onload=a=>{var t;const l=null===(t=a.target)||void 0===t?void 0:t.result,r=n.ij(l,{type:"binary"}).Sheets.SKUs,d=n.P6.sheet_to_json(r).map((e=>({ID:e.ID,name:e.Label,price:e.Price,cost:e.Cost.toFixed(2)})));e((0,u.JY)(d))},d.readAsArrayBuffer(r)}),[]),x=(0,l.useCallback)((()=>{var t;if(!a)return;const l=null===a||void 0===a||null===(t=a.getRenderedNodes())||void 0===t?void 0:t.map(((e,a)=>({...e.data,seqNo:a+1})));e((0,u.JY)(l))}),[a,e]);return(0,S.jsxs)(o.MainWrapper,{sx:{height:"85%"},children:[(0,S.jsx)(s.Z,{style:g,children:(0,S.jsx)(s.Z,{style:m,children:(0,S.jsx)(r.s,{rowData:d,columnDefs:v,defaultColDef:p,rowDragManaged:!0,onGridReady:b,onDragStopped:x})})}),(0,S.jsx)(i.Z,{onClick:()=>e((0,u.v9)(!0)),sx:{mt:2,background:"gray",color:"#ffff",px:2,"&:hover":{background:"gray",opacity:.7}},children:"Add SKU"}),(0,S.jsx)(D,{})]})}},1234:(e,a,t)=>{t.r(a),t.d(a,{DeleteButtonRenderer:()=>w,default:()=>N});var l=t(2791),r=t(3614),d=t(9633),o=t(1565),n=t(4045),s=t(3400),i=t(6029),c=t(4294),u=t(1668),h=t(4420),f=t(2643),g=(t(6704),t(3763)),m=t(5289),v=t(7123),p=t(9157),b=t(5661),S=t(7665),D=t(184);function x(){const e=(0,h.I0)(),{addStoreDialog:a,storeData:t}=(0,h.v9)((e=>e.fileData)),[r,d]=(0,l.useState)(""),[o,n]=(0,l.useState)(""),[s,i]=(0,l.useState)(""),[u,g]=(0,l.useState)(""),[x,w]=(0,l.useState)(""),N=()=>{e((0,f.jp)(!1)),d(""),n(""),i(""),g(""),w("")};return(0,D.jsxs)(m.Z,{open:a,onClose:N,children:[(0,D.jsx)(b.Z,{children:"Add New Store"}),(0,D.jsxs)(p.Z,{children:[(0,D.jsx)(S.Z,{label:"Store",fullWidth:!0,margin:"dense",value:r,onChange:e=>d(e.target.value)}),(0,D.jsx)(S.Z,{label:"City",fullWidth:!0,margin:"dense",value:o,onChange:e=>n(e.target.value)}),(0,D.jsx)(S.Z,{label:"State",fullWidth:!0,margin:"dense",value:s,onChange:e=>i(e.target.value)}),(0,D.jsx)(S.Z,{label:"ID",fullWidth:!0,margin:"dense",value:u,onChange:e=>g(e.target.value),error:!!x,helperText:x})]}),(0,D.jsxs)(v.Z,{children:[(0,D.jsx)(c.Z,{onClick:N,sx:{background:"red",color:"#ffff","&:hover":{background:"red",opacity:.7}},children:"Cancel"}),(0,D.jsx)(c.Z,{onClick:()=>{r&&o&&s&&u?(e=>t.some((a=>a.ID===e)))(u)?w("ID already exists. Please use a unique ID."):(e((0,f.og)([...t,{seqNo:t.length+1,City:o,State:s,Label:r,ID:u}])),N()):w("All fields are required.")},sx:{background:"gray",color:"#ffff","&:hover":{background:"gray",opacity:.7}},disabled:!r||!o||!s||!u,children:"Add"})]})]})}d.O3h.registerModules([d.I6w,d.oUh,d.CBb,d.ICW,d.n4K,d.ZAx]);const w=e=>{const{storeData:a}=(0,h.v9)((e=>e.fileData)),t=(0,h.I0)();return(0,D.jsx)(s.Z,{onClick:()=>{const l=a.filter((a=>a.ID!==e.data.ID)).map(((e,a)=>({...e,seqNo:a+1})));t((0,f.og)(l))},size:"small",children:(0,D.jsx)(u.Z,{})})},N=()=>{const e=(0,h.I0)(),{storeData:a}=(0,h.v9)((e=>e.fileData)),t=(0,l.useMemo)((()=>({width:"100%",height:"100%"})),[]),d=(0,l.useMemo)((()=>({height:"100%",width:"100%"})),[]),[s]=(0,l.useState)([{headerName:"",field:"delete",width:50,cellRenderer:w},{headerName:"S.No.",field:"seqNo",width:100,rowDrag:!0},{headerName:"Store ID",field:"ID",width:150,editable:!0},{headerName:"Store Name",field:"Label",width:250,editable:!0},{headerName:"City",field:"City",width:200,editable:!0},{headerName:"State",field:"State",width:100,editable:!0}]),u={width:170,valueSetter:t=>{const l=t.data.ID,r=t.column.colId;if(null!==t&&void 0!==t&&t.newValue){const d=null===a||void 0===a?void 0:a.map((e=>e.ID===l?{...e,[r]:t.newValue}:e));e((0,f.og)(d))}}},m=(0,l.useCallback)((async a=>{p(a.api);const t=await fetch(g.Ye),l=await t.blob();if(!l)return;const r=new FileReader;r.onload=a=>{var t;const l=null===(t=a.target)||void 0===t?void 0:t.result,r=n.ij(l,{type:"binary"}).Sheets.Stores,d=n.P6.sheet_to_json(r).map(((e,a)=>({seqNo:e["Seq No."]||a+1,ID:e.ID,Label:e.Label,City:e.City,State:e.State})));e((0,f.og)(d))},r.readAsArrayBuffer(l)}),[]),[v,p]=(0,l.useState)(null),b=(0,l.useCallback)((()=>{var a;if(!v)return;const t=null===v||void 0===v||null===(a=v.getRenderedNodes())||void 0===a?void 0:a.map(((e,a)=>({...e.data,seqNo:a+1})));e((0,f.og)(t))}),[v,e]);return(0,D.jsxs)(o.MainWrapper,{sx:{height:"85%"},children:[(0,D.jsx)(i.Z,{style:t,children:(0,D.jsx)(i.Z,{style:d,children:(0,D.jsx)(r.s,{rowData:a,columnDefs:s,defaultColDef:u,rowDragManaged:!0,onGridReady:m,onDragStopped:b})})}),(0,D.jsx)(c.Z,{onClick:()=>e((0,f.jp)(!0)),sx:{mt:2,background:"gray",color:"#ffff",px:2,"&:hover":{background:"gray",opacity:.7}},children:"Add Store"}),(0,D.jsx)(x,{})]})}},6704:()=>{}}]);
//# sourceMappingURL=393.eadd2514.chunk.js.map